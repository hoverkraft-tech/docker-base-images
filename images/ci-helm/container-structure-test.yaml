---
schemaVersion: "2.0.0"

commandTests:
  - name: "helm is installed"
    command: "helm"
    args: ["version"]
    exitCode: 0
    expectedOutput: ["version"]

  - name: "ct (chart-testing) is installed"
    command: "ct"
    args: ["version"]
    exitCode: 0

  - name: "kubeconform-helm plugin is installed"
    command: "helm"
    args: ["plugin", "list"]
    exitCode: 0
    expectedOutput: ["kubeconform"]

  - name: "helm-values-schema-json plugin is installed"
    command: "helm"
    args: ["plugin", "list"]
    exitCode: 0
    expectedOutput: ["schema"]

  - name: "jq is installed"
    command: "jq"
    args: ["--version"]
    exitCode: 0

  - name: "yq is installed"
    command: "yq"
    args: ["--version"]
    exitCode: 0

fileExistenceTests:
  - name: "helm-deps.sh script exists and is executable"
    path: "/usr/local/bin/helm-deps.sh"
    shouldExist: true
    isExecutableBy: "any"

metadataTest:
  user: "helm:helm"
  workdir: "/home/helm"
